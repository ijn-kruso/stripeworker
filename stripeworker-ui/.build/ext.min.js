"use strict";var __StripeExtExports=(()=>{var ze=Object.create;var L=Object.defineProperty,Ne=Object.defineProperties,Je=Object.getOwnPropertyDescriptor,Ge=Object.getOwnPropertyDescriptors,Ke=Object.getOwnPropertyNames,xe=Object.getOwnPropertySymbols,We=Object.getPrototypeOf,Te=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var ve=(e,t,o)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,j=(e,t)=>{for(var o in t||(t={}))Te.call(t,o)&&ve(e,o,t[o]);if(xe)for(var o of xe(t))Ze.call(t,o)&&ve(e,o,t[o]);return e},z=(e,t)=>Ne(e,Ge(t));var I=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,o)=>(typeof require!="undefined"?require:t)[o]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var b=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ye=(e,t)=>{for(var o in t)L(e,o,{get:t[o],enumerable:!0})},$=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Ke(t))!Te.call(e,i)&&i!==o&&L(e,i,{get:()=>t[i],enumerable:!(n=Je(t,i))||n.enumerable});return e},U=(e,t,o)=>($(e,t,"default"),o&&$(o,t,"default")),N=(e,t,o)=>(o=e!=null?ze(We(e)):{},$(t||!e||!e.__esModule?L(o,"default",{value:e,enumerable:!0}):o,e)),Qe=e=>$(L({},"__esModule",{value:!0}),e);var x=(e,t,o)=>new Promise((n,i)=>{var c=l=>{try{a(o.next(l))}catch(d){i(d)}},p=l=>{try{a(o.throw(l))}catch(d){i(d)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(c,p);a((o=o.apply(e,t)).next())});var ne=b(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.SDK_VERSION=void 0;J.SDK_VERSION="8.10.0"});var ie=b(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.Tooltip=r.TextField=r.TextArea=r.Tabs=r.TableRow=r.Table=r.TableHeaderCell=r.TableHead=r.TableFooter=r.TableCell=r.TableBody=r.Tab=r.TabPanels=r.TabPanel=r.TabList=r.Switch=r.StripeFileUploader=r.Spinner=r.Sparkline=r.SignInView=r.SettingsView=r.Select=r.Radio=r.Menu=r.MenuItem=r.MenuGroup=r.List=r.ListItem=r.Link=r.LineChart=r.Inline=r.Img=r.Icon=r.FormFieldGroup=r.FocusView=r.Divider=r.DateField=r.ContextView=r.Chip=r.ChipList=r.Checkbox=r.Button=r.ButtonGroup=r.Box=r.BarChart=r.Banner=r.Badge=r.Accordion=r.AccordionItem=void 0;var Xe=I("react/jsx-runtime"),et=I("@remote-ui/react"),tt=ne(),rt=e=>{let t=e.displayName||e.toString(),o=n=>(0,Xe.jsx)(e,Object.assign({},n,{wrappedComponentName:t,sdkVersion:tt.SDK_VERSION,schemaVersion:"v8"}));return o.wrappedComponentName=t,o},s=(e,t,o)=>{let n=(0,et.createRemoteReactComponent)(e,{fragmentProps:t});return o?rt(n):n};r.AccordionItem=s("AccordionItem",["title","actions","media","subtitle"],!0);r.Accordion=s("Accordion",[],!0);r.Badge=s("Badge",[],!0);r.Banner=s("Banner",["actions","description","title"],!0);r.BarChart=s("BarChart",[],!0);r.Box=s("Box",[],!0);r.ButtonGroup=s("ButtonGroup",["menuTrigger"],!0);r.Button=s("Button",[],!0);r.Checkbox=s("Checkbox",["label"],!0);r.ChipList=s("ChipList",[],!0);r.Chip=s("Chip",[],!0);r.ContextView=s("ContextView",["actions","banner","footerContent","primaryAction","secondaryAction"],!0);r.DateField=s("DateField",["label"],!0);r.Divider=s("Divider",[],!0);r.FocusView=s("FocusView",["footerContent","primaryAction","secondaryAction"],!0);r.FormFieldGroup=s("FormFieldGroup",[],!0);r.Icon=s("Icon",[],!0);r.Img=s("Img",[],!0);r.Inline=s("Inline",[],!0);r.LineChart=s("LineChart",[],!0);r.Link=s("Link",[],!0);r.ListItem=s("ListItem",["icon","image","secondaryTitle","title","value"],!0);r.List=s("List",[],!0);r.MenuGroup=s("MenuGroup",["title"],!0);r.MenuItem=s("MenuItem",[],!0);r.Menu=s("Menu",["trigger"],!0);r.Radio=s("Radio",["label"],!0);r.Select=s("Select",["label"],!0);r.SettingsView=s("SettingsView",[],!0);r.SignInView=s("SignInView",["descriptionActionContents","footerContent"],!0);r.Sparkline=s("Sparkline",[],!0);r.Spinner=s("Spinner",[],!0);r.StripeFileUploader=s("StripeFileUploader",[],!0);r.Switch=s("Switch",["label"],!0);r.TabList=s("TabList",[],!0);r.TabPanel=s("TabPanel",[],!0);r.TabPanels=s("TabPanels",[],!0);r.Tab=s("Tab",[],!0);r.TableBody=s("TableBody",[],!0);r.TableCell=s("TableCell",[],!0);r.TableFooter=s("TableFooter",[],!0);r.TableHead=s("TableHead",[],!0);r.TableHeaderCell=s("TableHeaderCell",[],!0);r.Table=s("Table",[],!0);r.TableRow=s("TableRow",[],!0);r.Tabs=s("Tabs",[],!0);r.TextArea=s("TextArea",["label"],!0);r.TextField=s("TextField",["label"],!0);r.Tooltip=s("Tooltip",["trigger"],!0)});var se=b((Kt,Pe)=>{"use strict";var ot=function(e,t,o,n,i,c,p,a){if(!e){var l;if(t===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[o,n,i,c,p,a],u=0;l=new Error(t.replace(/%s/g,function(){return d[u++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};Pe.exports=ot});var v=b(D=>{"use strict";var nt=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(D,"__esModule",{value:!0});D.getHostEndpoint=void 0;var it=nt(se()),st=()=>{var e;let t=(e=globalThis.__StripeExtExports)===null||e===void 0?void 0:e.endpoint;return(0,it.default)(t,"hostEndpoint has not been initialized"),t};D.getHostEndpoint=st});var ae=b(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.stripeApiFetch=void 0;var at=v(),ct=(e,t)=>{try{return(0,at.getHostEndpoint)().call.stripeApiFetch(e,t)}catch(o){throw console.error("error calling stripe fetch",o),o}};G.stripeApiFetch=ct});var Ce=b(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.clipboardWriteText=void 0;var ut=v(),lt=(e="")=>(0,ut.getHostEndpoint)().call.clipboardWriteText(e);K.clipboardWriteText=lt});var Ie=b(P=>{"use strict";var dt=P&&P.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o);var i=Object.getOwnPropertyDescriptor(t,o);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,i)}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),pt=P&&P.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ft=P&&P.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var o in e)o!=="default"&&Object.prototype.hasOwnProperty.call(e,o)&&dt(t,e,o);return pt(t,e),t};Object.defineProperty(P,"__esModule",{value:!0});P.useRefreshDashboardData=void 0;var ht=ft(I("react")),mt=v(),wt=()=>ht.useCallback(()=>(0,mt.getHostEndpoint)().call.refreshDashboardData(),[]);P.useRefreshDashboardData=wt});var ue=b(y=>{"use strict";var _t=y&&y.__awaiter||function(e,t,o,n){function i(c){return c instanceof o?c:new o(function(p){p(c)})}return new(o||(o=Promise))(function(c,p){function a(u){try{d(n.next(u))}catch(w){p(w)}}function l(u){try{d(n.throw(u))}catch(w){p(w)}}function d(u){u.done?c(u.value):i(u.value).then(a,l)}d((n=n.apply(e,t||[])).next())})},gt=y&&y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(y,"__esModule",{value:!0});y.AUTHORIZATION_VALUE=y.AUTHORIZATION_HEADER=y.createHttpClient=y.STRIPE_API_KEY=y.StripeAppsHttpClient=void 0;var bt=gt(se()),yt=ae(),St=/[ps]k_(test|live)_[A-Za-z0-9]+/,ce=class{constructor(t){this._resp=t}getHeaders(){return this._resp.headers}getStatusCode(){return this._resp.status}getRawResponse(){return this._resp}toStream(){throw new Error("Streams have not been implemented in the Stripe HTTP client")}toJSON(){let{json:t}=this._resp;return t===void 0?Promise.reject(new Error("Response body undefined")):Promise.resolve(t)}},W=class{constructor(t){this._fetch=t}getClientName(){return"stripe-ui-extension"}makeRequest(t,o,n,i,c,p,a,l){return _t(this,void 0,void 0,function*(){(0,bt.default)(a==="https","Must use https connections in UI extensions");let d={method:i,headers:c};p&&(d.body=p);let u=c.Authorization;if(u&&St.test(u))throw new Error("Do not use actual stripe keys when using the Stripe JS API client with UI extesions.\n\n Instead, use `STRIPE_API_KEY` from `@stripe/ui-extension-sdk/http_client` as a placeholder.");let w=yield this._fetch(n,d);return new ce(w)})}};y.StripeAppsHttpClient=W;y.STRIPE_API_KEY="DO_NOT_PASS_A_REAL_API_KEY";var xt=()=>new W(yt.stripeApiFetch);y.createHttpClient=xt;y.AUTHORIZATION_HEADER="Authorization";y.AUTHORIZATION_VALUE=`Bearer ${y.STRIPE_API_KEY}`});var Ee=b(q=>{"use strict";var vt=q&&q.__awaiter||function(e,t,o,n){function i(c){return c instanceof o?c:new o(function(p){p(c)})}return new(o||(o=Promise))(function(c,p){function a(u){try{d(n.next(u))}catch(w){p(w)}}function l(u){try{d(n.throw(u))}catch(w){p(w)}}function d(u){u.done?c(u.value):i(u.value).then(a,l)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(q,"__esModule",{value:!0});q.getDashboardUserEmail=void 0;var Tt=v(),Ae=ue(),Pt=()=>vt(void 0,void 0,void 0,function*(){try{let e=yield(0,Tt.getHostEndpoint)().call.stripeApiFetch("/v1/user/email",{headers:{[Ae.AUTHORIZATION_HEADER]:Ae.AUTHORIZATION_VALUE}});return e.ok?(e.email=e.json.email,e):Promise.reject(e)}catch(e){throw console.error("Error getting dashboard user email",e),e}});q.getDashboardUserEmail=Pt});var Be=b(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.getUserAuthorizedPermissions=void 0;var Ct=v(),It=()=>(0,Ct.getHostEndpoint)().call.getUserAuthorizedPermissions();Z.getUserAuthorizedPermissions=It});var Re=b(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.isPermissionAuthorized=void 0;var At=v(),Et=e=>(0,At.getHostEndpoint)().call.isPermissionAuthorized(e);Y.isPermissionAuthorized=Et});var ke=b(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.isSourceInAuthorizedCSP=void 0;var Bt=v(),Rt=e=>(0,Bt.getHostEndpoint)().call.isSourceInAuthorizedCSP(e);Q.isSourceInAuthorizedCSP=Rt});var Oe=b(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.createOAuthState=void 0;var kt=v(),Ot=(e="")=>(0,kt.getHostEndpoint)().call.createOAuthState(e);X.createOAuthState=Ot});var je=b(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0})});var Ue=b(ee=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.fetchStripeSignature=void 0;var Vt=v(),jt=e=>(0,Vt.getHostEndpoint)().call.fetchStripeSignature(e);ee.fetchStripeSignature=jt});var De=b(M=>{"use strict";var Ut=M&&M.__awaiter||function(e,t,o,n){function i(c){return c instanceof o?c:new o(function(p){p(c)})}return new(o||(o=Promise))(function(c,p){function a(u){try{d(n.next(u))}catch(w){p(w)}}function l(u){try{d(n.throw(u))}catch(w){p(w)}}function d(u){u.done?c(u.value):i(u.value).then(a,l)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(M,"__esModule",{value:!0});M.showToast=void 0;var Dt=v(),qt=(e,...t)=>Ut(void 0,[e,...t],void 0,function*(o,n={}){return(0,Dt.getHostEndpoint)().call.showToast(o,n)});M.showToast=qt});var qe=b(g=>{"use strict";var Mt=g&&g.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o);var i=Object.getOwnPropertyDescriptor(t,o);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,i)}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),S=g&&g.__exportStar||function(e,t){for(var o in e)o!=="default"&&!Object.prototype.hasOwnProperty.call(t,o)&&Mt(t,e,o)};Object.defineProperty(g,"__esModule",{value:!0});S(v(),g);S(ae(),g);S(Ce(),g);S(Ie(),g);S(Ee(),g);S(Be(),g);S(ue(),g);S(Re(),g);S(ke(),g);S(Oe(),g);S(je(),g);S(Ue(),g);S(De(),g)});var R={};Ye(R,{BUILD_TIME:()=>$t,ProductListView:()=>Le,default:()=>zt});var B=I("react"),h=N(ie());var te=N(qe());var le="https://api.stripeworker.com";function Me(e){let t={user_id:e.userId,account_id:e.accountId};return{post(c){return x(this,arguments,function*(n,i={}){var d;let p=j(j({},t),i),a=yield(0,te.fetchStripeSignature)(),l=yield fetch(`${le}${n}`,{method:"POST",headers:{"Content-Type":"application/json","Stripe-Signature":a},body:JSON.stringify(p)});if(!l.ok){let u=yield l.json().catch(()=>({error:"Request failed"}));throw new A(l.status,(d=u.error)!=null?d:"Request failed")}return l.json()})},get(c){return x(this,arguments,function*(n,i={}){var d;let p=yield(0,te.fetchStripeSignature)(),a=new URLSearchParams(z(j({},i),{account_id:e.accountId})),l=yield fetch(`${le}${n}?${a}`,{method:"GET",headers:{"Stripe-Signature":p}});if(!l.ok){let u=yield l.json().catch(()=>({error:"Request failed"}));throw new A(l.status,(d=u.error)!=null?d:"Request failed")}return l.json()})},delete(n){return x(this,null,function*(){var p;let i=yield(0,te.fetchStripeSignature)(),c=yield fetch(`${le}${n}?account_id=${e.accountId}`,{method:"DELETE",headers:{"Stripe-Signature":i}});if(!c.ok){let a=yield c.json().catch(()=>({error:"Request failed"}));throw new A(c.status,(p=a.error)!=null?p:"Request failed")}return c.json()})},uploadFile(n,i){return x(this,null,function*(){let c=yield fetch(n,{method:"PUT",headers:{"Content-Type":i.type||"text/csv"},body:i});if(!c.ok)throw new A(c.status,"File upload failed")})},uploadCsvContent(n,i){return x(this,null,function*(){let c=yield fetch(n,{method:"PUT",headers:{"Content-Type":"text/csv"},body:i});if(!c.ok)throw new A(c.status,"CSV upload failed")})}}}var A=class extends Error{constructor(o,n){super(n);this.status=o;this.name="ApiError"}};var E=I("react"),f=N(ie());var _=I("react/jsx-runtime"),Ht=({api:e})=>{var pe,fe,he,me,we,_e,ge,be,ye;let[t,o]=(0,E.useState)(""),[n,i]=(0,E.useState)(!1),[c,p]=(0,E.useState)(!1),[a,l]=(0,E.useState)(null),[d,u]=(0,E.useState)(null),[w,C]=(0,E.useState)(!1),F=()=>x(void 0,null,function*(){if(!t.trim()){u("Please paste CSV content");return}if(t.trim().split(`
`).length<2){u("CSV must have a header row and at least one data row");return}i(!0),u(null);try{let O=yield e.post("/import/from-csv-content",{csvContent:t,dryRun:w});l(O),p(!0),yield k(O.id)}catch(O){u(O instanceof Error?O.message:"Upload failed")}finally{i(!1),p(!1)}}),k=T=>x(void 0,null,function*(){let Se=0;for(;Se<600;){try{let V=yield e.post(`/import/${T}/process`,{batchSize:100});if(l(V),V.status==="completed"||V.status==="failed"||V.status==="cancelled")return;yield new Promise(oe=>setTimeout(oe,100))}catch(V){console.error("Chunk processing error:",V),yield new Promise(oe=>setTimeout(oe,3e3))}Se++}u("Import timed out")}),H=()=>x(void 0,null,function*(){if(!(!a||a.status!=="processing"))try{yield e.delete(`/jobs/${a.id}`),l(T=>T?z(j({},T),{status:"cancelled"}):null)}catch(T){console.error("Cancel error:",T)}}),de=()=>{o(""),l(null),u(null),C(!1)},Fe=()=>!a||a.totalRows===0?0:Math.round(a.processedRows/a.totalRows*100),$e=()=>t.trim()?Math.max(0,t.trim().split(`
`).length-1):0;return(0,_.jsxs)(f.Box,{css:{stack:"y",gap:"small"},children:[d&&(0,_.jsx)(f.Banner,{type:"critical",title:"Import Error",description:d,onDismiss:()=>u(null)}),!c&&!a&&(0,_.jsxs)(f.Box,{css:{stack:"y",gap:"small"},children:[(0,_.jsx)(f.TextArea,{label:"Paste CSV content",placeholder:`id,name,description,active
prod_xxx,My Product,Description,true
...`,value:t,onChange:T=>o(T.target.value),rows:8}),t.trim()&&(0,_.jsxs)(f.Box,{css:{color:"secondary"},children:[$e()," data row(s) detected"]}),t.trim()&&(0,_.jsxs)(f.Box,{css:{stack:"y",gap:"small"},children:[(0,_.jsx)(f.Checkbox,{label:"Dry run (preview changes without applying)",checked:w,onChange:T=>C(T.target.checked)}),(0,_.jsx)(f.Button,{type:"primary",onPress:F,disabled:n,children:n?"Uploading...":w?"Preview Import":"Import Products"})]})]}),c&&a&&(0,_.jsxs)(f.Box,{css:{stack:"y",gap:"small"},children:[(0,_.jsxs)(f.Box,{css:{stack:"x",gap:"small",alignY:"center"},children:[(0,_.jsx)(f.Spinner,{size:"small"}),(0,_.jsxs)(f.Box,{children:[w?"Previewing":"Importing",": ",Fe(),"% (",a.processedRows,"/",a.totalRows," rows)"]})]}),a.type==="import"&&(0,_.jsxs)(f.Box,{children:["Created: ",(pe=a.createdCount)!=null?pe:0," | Updated: ",(fe=a.updatedCount)!=null?fe:0," | Skipped: ",(he=a.skippedCount)!=null?he:0]}),(0,_.jsx)(f.Button,{type:"destructive",onPress:H,children:"Cancel"})]}),a&&a.status==="completed"&&!c&&(0,_.jsxs)(f.Box,{css:{stack:"y",gap:"small"},children:[(0,_.jsx)(f.Banner,{type:"default",title:w?"Dry Run Complete":"Import Complete",description:w?`Preview: Would create ${(me=a.createdCount)!=null?me:0}, update ${(we=a.updatedCount)!=null?we:0}, skip ${(_e=a.skippedCount)!=null?_e:0} products.`:`Successfully created ${(ge=a.createdCount)!=null?ge:0}, updated ${(be=a.updatedCount)!=null?be:0} products. ${(ye=a.skippedCount)!=null?ye:0} skipped.`}),w?(0,_.jsx)(f.Button,{type:"primary",onPress:()=>{C(!1),l(null)},children:"Proceed with Import"}):(0,_.jsx)(f.Button,{type:"secondary",onPress:de,children:"Import Another File"})]}),a&&a.status==="failed"&&!c&&(0,_.jsxs)(f.Box,{css:{stack:"y",gap:"small"},children:[(0,_.jsx)(f.Banner,{type:"critical",title:"Import Failed",description:"The import encountered an error and could not complete."}),(0,_.jsx)(f.Button,{type:"secondary",onPress:de,children:"Try Again"})]})]})},He=Ht;var re="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0iI2ZmZmZmZiI+DQogIDwhLS0gU3ByZWFkc2hlZXQvdGFibGUgaWNvbiAtLT4NCiAgPHJlY3QgeD0iNCIgeT0iNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiByeD0iMiIgcnk9IjIiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogIDwhLS0gSGVhZGVyIHJvdyAtLT4NCiAgPHJlY3QgeD0iNCIgeT0iNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjYiIHJ4PSIyIiByeT0iMiIvPg0KICA8IS0tIFZlcnRpY2FsIGRpdmlkZXJzIC0tPg0KICA8bGluZSB4MT0iMTIiIHkxPSIxMCIgeDI9IjEyIiB5Mj0iMjgiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiLz4NCiAgPGxpbmUgeDE9IjIwIiB5MT0iMTAiIHgyPSIyMCIgeTI9IjI4IiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMS41Ii8+DQogIDwhLS0gSG9yaXpvbnRhbCBkaXZpZGVycyAtLT4NCiAgPGxpbmUgeDE9IjQiIHkxPSIxNiIgeDI9IjI4IiB5Mj0iMTYiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiLz4NCiAgPGxpbmUgeDE9IjQiIHkxPSIyMiIgeDI9IjI4IiB5Mj0iMjIiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiLz4NCjwvc3ZnPg0K";var m=I("react/jsx-runtime"),Ft=({userContext:e})=>{var w;let[t,o]=(0,B.useState)("home"),[n,i]=(0,B.useState)(""),[c,p]=(0,B.useState)(null),[a,l]=(0,B.useState)(!1);if(!(e!=null&&e.id)||!((w=e==null?void 0:e.account)!=null&&w.id))return(0,m.jsx)(h.ContextView,{title:"Products",brandColor:"#635bff",brandIcon:re,children:(0,m.jsx)(h.Box,{css:{padding:"medium"},children:"Loading..."})});let d=Me({userId:e.id,accountId:e.account.id}),u=(0,B.useCallback)(()=>x(void 0,null,function*(){l(!0),i("Starting export..."),p(null);try{let C=yield d.post("/export/start");i("Exporting products...");let F=0;for(;F<60;){yield new Promise(H=>setTimeout(H,3e3));let k=yield d.get(`/jobs/${C.id}`);if(k.status==="completed"){let H=yield d.get(`/export/${C.id}/download`);p(H.downloadUrl),i(`Export complete! ${k.totalRows} products exported.`);break}else if(k.status==="failed"){i("Export failed");break}i(`Exporting... ${k.processedRows} products`),F++}}catch(C){i(`Error: ${C instanceof Error?C.message:"Export failed"}`)}finally{l(!1)}}),[d]);return t==="home"?(0,m.jsx)(h.ContextView,{title:"Stripeworker",description:"Import and export Stripe resources to and from CSV",brandColor:"#635bff",brandIcon:re,children:(0,m.jsxs)(h.Box,{css:{padding:"medium",stack:"y",gap:"medium"},children:[(0,m.jsx)(h.Box,{css:{fontWeight:"semibold"},children:"Select Resource Type"}),(0,m.jsxs)(h.Button,{type:"primary",onPress:()=>o("products"),children:[(0,m.jsx)(h.Icon,{name:"product",size:"xsmall"})," Products"]})]})}):(0,m.jsx)(h.ContextView,{title:"Products",description:"Import and export products to and from CSV",brandColor:"#635bff",brandIcon:re,children:(0,m.jsxs)(h.Box,{css:{padding:"medium",stack:"y",gap:"large"},children:[(0,m.jsxs)(h.Link,{type:"secondary",onPress:()=>o("home"),children:[(0,m.jsx)(h.Icon,{name:"arrowLeft",size:"xsmall"})," Back"]}),(0,m.jsxs)(h.Box,{css:{stack:"y",gap:"small"},children:[(0,m.jsx)(h.Box,{css:{fontWeight:"semibold"},children:"Export Products"}),(0,m.jsx)(h.Box,{children:"Download all your products as a CSV file."}),n&&(0,m.jsx)(h.Box,{children:n}),(0,m.jsx)(h.Box,{css:{stack:"x",gap:"small"},children:(0,m.jsx)(h.Button,{type:"primary",onPress:u,disabled:a,children:a?"Exporting...":"Export Products to CSV"})}),c&&(0,m.jsx)(h.Box,{css:{stack:"y",gap:"xsmall"},children:(0,m.jsx)(h.Link,{href:c,target:"_blank",children:"Click here to download your CSV file"})})]}),(0,m.jsxs)(h.Box,{css:{stack:"y",gap:"small"},children:[(0,m.jsx)(h.Box,{css:{fontWeight:"semibold"},children:"Import Products"}),(0,m.jsx)(h.Box,{children:"Paste CSV content to create or update products."}),(0,m.jsx)(He,{api:d})]})]})})},Le=Ft;U(R,N(ne()));var $t="2026-02-15 12:47:12.9150594 +0100 CET m=+8.645922801";var zt={connect_permissions:null,distribution_type:"private",icon:"./src/icon.png",id:"stripeworker.com",name:"Stripeworker",permissions:[{permission:"product_read",purpose:"Export products to CSV"},{permission:"product_write",purpose:"Import products from CSV"}],post_install_action:{type:"external",url:"https://stripeworker.com"},stripe_api_access_type:"platform",ui_extension:{content_security_policy:{"connect-src":["https://api.stripeworker.com/export","https://api.stripeworker.com/import","https://api.stripeworker.com/jobs"],"image-src":null,purpose:"Connect to backend API for CSV import/export operations"},views:[{component:"ProductListView",viewport:"stripe.dashboard.product.list"}]},version:"1.0.0"};return Qe(R);})();
//# sourceMappingURL=ext.min.js.map
